<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Dynamic Map Integration</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://tiles.locationiq.com/v3/libs/maplibre-gl/1.15.2/maplibre-gl.js"></script>
<link href="https://tiles.locationiq.com/v3/libs/maplibre-gl/1.15.2/maplibre-gl.css" rel="stylesheet" />
<style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; height: 100vh; } /* Adjust size as needed */
</style>
</head>
<body>
<div id="map"></div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        locationiq.key = 'pk.85bc6b04d2a320fa3202e41e57a1a84b'; // Replace with your actual LocationIQ access token

        var map = new maplibregl.Map({
            container: 'map', // container ID
            style: locationiq.getLayer("Streets"), // Map style
            center: [-122.42, 37.779], // Initial position [lng, lat]
            zoom: 12 // Initial zoom
        });

        // Add navigation and other controls
        map.addControl(new maplibregl.NavigationControl(), 'top-right');
        map.addControl(new maplibregl.FullscreenControl());
        map.addControl(new maplibregl.ScaleControl({
            maxWidth: 80,
            unit: 'metric'
        }));

        // Add geolocation control
        map.addControl(new maplibregl.GeolocateControl({
            positionOptions: {
                enableHighAccuracy: true
            },
            trackUserLocation: true
        }));

        // Attempt to fetch and center on the user's current location
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                map.setCenter([position.coords.longitude, position.coords.latitude]);
            }, function(error) {
                console.error("Geolocation error:", error);
            });
        } else {
            console.log("Geolocation is not supported by this browser.");
        }
    });
</script>
</body>
</html>
